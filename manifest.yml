---
applications:
  - name: github-mcp-server-sse
    memory: 512M
    instances: 1
    stack: cflinuxfs4
    buildpacks:
      - go_buildpack

    env:
      # Server configuration
      VERSION: "1.0.0"

      # GitHub configuration
      GITHUB_HOST: "https://github.com"
      GITHUB_ALLOW_UNAUTHENTICATED: "false"

      # Tool configuration
      GITHUB_TOOLSETS: "repos,issues,pull_requests,users,code_security,secret_protection,notifications"
      GITHUB_DYNAMIC_TOOLSETS: "true"
      GITHUB_READ_ONLY: "false"

      # Go build configuration
      GOVERSION: "go1.23.7"
      GO_INSTALL_PACKAGE_SPEC: ./cmd/github-mcp-server

    # Health check configuration
    health-check-type: http
    health-check-http-endpoint: /health

    # FIXED: Use binary name without ./ prefix
#    processes:
#      - type: web
#        command: bin/github-mcp-server sse --allow-unauthenticated=false
#        memory: 512M
#        disk_quota: 1G
#        health-check-type: http
#        health-check-http-endpoint: /health
#        timeout: 60
